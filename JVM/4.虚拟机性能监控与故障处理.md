# 第四章 虚拟机性能监控与故障处理

------

[TOC]

------



## 1、JDK的命令行工具

​		JDK中sun公司附加了一些工具,主要包括**监视虚拟机**和**故障处理的工具**.这些工具都非常小,只是jdk/lib/tools.jar的一层封装而已.

### 1.1 jps: 虚拟机进程状况工具

​		jps(JVM Process Status),取名来自UNIX的ps指令(ps -ef的那个).功能也类似:可以列出正在运行的虚拟机进程,并显示虚拟机执行主类名称以及这些进程的本地虚拟机唯一ID.

​		jps [options] [hostid]

| 选项 | 作用                                           |
| ---- | ---------------------------------------------- |
| -q   | 只输出LVMID,省略主类名称                       |
| -m   | 输出虚拟机进程启动时传递给主类main()函数的参数 |
| -l   | 输出主类的全名,如果执行的是jar包,输出jar包路径 |
| -v   | 输出虚拟机启动时的JVM参数                      |

### 1.2 jstat: 虚拟机统计信息监视工具

​		jstat是用于监视虚拟机各种运行状态信息的命令行工具.可以显示本地或者远程虚拟机进程中的类装载,内存,垃圾收集,JIT编译等运行数据.

### 1.3 jinfo: Java配置信息工具

​		jinfo的作用是实时地查看和调整虚拟机各项参数.

### 1.4 jmap: Java内存映像工具

​		jmap命令用于生成堆转储快照.

### 1.5 jhat: 虚拟机堆转储快照分析工具

​		分析jmap生成的堆转储快照.

### 1.6 jstack: Java堆栈跟踪工具

​		用于生成虚拟机当前时刻的线程快照.线程快照就是当前虚拟机内每一条线程正在执行的方法堆栈的集合.

### 1.7 HSDIS: JIT生成代码反汇编

​		将JIT动态生成的代码还原为汇编代码输出,并生成大量非常有价值的注释.

## 2、 JDK的可视化工具

​		.....