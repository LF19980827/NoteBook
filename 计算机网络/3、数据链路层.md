------

[TOC]

------

# 1、链路层概述·

## 1.1 链路层概念

​	数据链路层负责通过一条链路从一个结点向另一个物理链路直接相连的相邻结点传送数据报。

​	数据链路层在物理层提供服务的基础上向网络层提供服务，其最基本的服务是将源自网络层来的数据可靠地传输到相邻节点的目标机网络层。其主要作用是加强物理层传输原始比特流的功能，将物理层提供的可能出错的物理连接改造成为逻辑上无差错的数据链路，使之对网络层表现为一条无差错的链路。

## **1.2 相关术语**

- 结点:主机、路由器
- 链路:网络中两个结 点之间的**物理**通道，链路的传输介质主要有双绞线、 光纤和微波。分为有线链路、无线链路。
- 数据链路: 网络中两个结点之间的**逻辑**通道，把实现控制数据传输协议的硬件和软件加到链路上就构成数据链路。
- 帧:链路层的协议数据单元，封装网络层数据报。

## 1.3 链路层主要功能

- 为网络层提供服务：无确认无连接服务，有确认无连接服务，有确认面向连接服务。
- 链路管理：即连接的建立、维持、释放(用于面向连接的服务)。
- 组帧。
- 流量控制。
- 差错控制(帧错/位错)。

# 2、链路层的功能

## 2.1 封装成帧&透明传输

​	**封装成帧**：就是在一段数据的前后部分添加首部和尾部，这样就构成了一个帧。接收端在收到物理层上交的比特流后，就能根据首部和尾部的标记，从收到的比特流中识别帧的开始和结束。

​	首部和尾部包含许多的控制信息，他们的一个重要作用:帧定界( 确定帧的界限)。

​	封装成帧的四种方法：字符计数法、字符填充法、零比特填充法、违规编码法

​	**透明传输**：是指不管所传数据是什么样的比特组合，都应当能够在链路上传送。因此，链路层就“看不见”有什么妨碍数据传输的东西。

**（1）字符计数法**：帧首部使用一一个计数字段(第一个字节，八位)来标明帧内字符数。

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.1.1.png)

**（2）字符填充法**：在帧的首部和尾部填充标识，如果在中间遇到冲突的字节使用转义字符

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.1.2.png)

**（3）零比特填充法**：在数据首部与尾部都填充01111110作为标识，并且在数据中，如果遇到五个1，则在其后面加一个0，保证其首位标识的唯一性。在接受时去掉即可

**（4）违规编码法**：利用曼彻斯特编码 1为高-低，0为低-高 的原理，使其首部标识为高-高，尾部为低-低

## 2.2 差错控制

- 检错编码：奇偶校验码、循环冗余码CRC
- 纠错编码：海明码

### 2.3.1 检错编码

**（1）奇偶校验码**：n-1位信息元，1位校验元

| n-1位（数据） | 1位（校验位）                           |
| ------------- | --------------------------------------- |
| 0110          | 1（如果为奇校验则需保证n位中有奇数个1） |
| 0110          | 0（如果为偶校验则需保证n位中有偶数个1） |

**（2）循环冗余码CRC**

​		发送端：
$$
待发送的数据/生成多项式=?......冗余码(FCS帧检验序列)
$$

$$
真实发送的数据 = 待发送的数据+冗余码(FCS帧检验序列)
$$

​		接收端：
$$
接收到的数据/生成多项=？....0
$$
​		则传输无错

​		计算冗余码

- 加0：假设生成多项式G(x)的阶为r，则加r个0。即+(产生多项式的位数-1)个0
- 模2除法：（异或：同0异1）数据加0后除以多项式，余数为冗余码

例题：

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.2.1.png)

### 2.3.2 纠错编码（海明码）【难】

​	假设数据 D=101101

（1）**确定校验码位数r**

​			海明不等式：r为冗余信息位，k为信息位。由k可解出r
$$
2^r>=k+r+1
$$
​			则可得出r=4，即有4位校验位 

（2）**确定校验码和数据的位置**

​		1）校验码按序放在2的几次方上，然后信息位按位插入

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.2.2.png)

​		2）计算各个校验位的值

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.2.3.png)

​	如图，首先计算P1的值，其他校验位的值同理

**P1的二进制为0001，首先找出最后一位为1的所有信息位**

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.2.4.png)

然后**将找出来的所有位置的值进行异或运算（同0异1），使其结果=0，即可求出P1**
$$
P1⊕D1⊕D2⊕D4⊕D5=0
$$

$$
==>P1⊕1⊕0⊕1⊕0=0
$$

$$
==>P1=0
$$

依次求出检验位填入可得

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.2.5.png)

故海明码为0010011101

（3）**检查纠错**

​	假设接收端的第五位出错，则接收到的数据为0010111101

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.2.6.png)

与求校验位时相同，先找出对应位置，然后将其异或。以P1为例，假设结果为A1
$$
P1⊕D1⊕D2⊕D4⊕D5=A1
$$

$$
A1=0⊕1⊕1⊕1⊕0=1
$$

依次求出各结果，得到A1-A4。								
$$
A1=1,A2=0,A3=1,A4=0
$$
**将A1-A4逆序排列，即是出错的位数**
$$
出错位数=A4A3A2A1=0101=5
$$


## 2.3 流量控制

​	较高的发送速度和较低的接收能力的不匹配，会造成传输出错，因此需要流量控制

​	数据链路层与传输层的流量控制的区别：

|            | 方式   | 控制手段                   |
| ---------- | ------ | -------------------------- |
| 数据链路层 | 点对点 | 接收方收不下就不回复确认   |
| 传输层     | 端到端 | 接收端给发送端一个窗口公告 |

流量控制的方法：

- 停止-等待协议：发送窗口大小=1，接收窗口大小=1
- 滑动窗口协议
  - 后退N帧协议（GBN）：发送窗口大小>1，接收窗口大小=1
  - 选择重传协议（SR）：发送窗口大小>1，接收窗口大小>1

### 2.3.1 停止-等待协议

丢包：物理线路故障、设备故障、病毒攻击、路由信息错误等原因，会导致数据包的丢失。

停止等待协议的作用：解决比特出差错和丢包问题，实现流量控制

应用的情况

- 无差错
- 有差错
  - 接收端检测出错或数据帧丢失
  - 确认帧（ACK）丢失
  - 确认帧迟到

#### （1）信道利用率

​	信道利用率：发送方在一个发送周期内，有效地发送数据所需要的时间占整个发送周期的比率

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.3.1.png)

​		设信道利用率 = U，发送时延=TD，往返时延=RTT，接收时延=TA
$$
U=TD/(TD+RTT+TA)
$$
​		也可以设 发送周期（从发送数据开始，到收到第一个确认帧）=T， 一个周期内发送的比特量=L，发送方数据传输率=C
$$
U=(L/C)/T
$$

$$
信道吞吐率=U*发送方的发送速率
$$

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.3.2.png)



### 2.3.2 后退N帧协议（GBN）

**（1）GBN的滑动窗口**

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.3.3.png)

**（2）GBN发送方的三个响应**

- **上层的调用**：上层要发送数据时，发送方先检查发送窗口是否已满，如果未满，则产生一个帧并将其发送;如果窗口已满，发送方只需将数据返回给上层，暗示上层窗口已满。上层等一会再发送。(实际实现中， 发送方可以缓存这些数据，窗口不满时再发送帧)。
- **收到了一个ACK**：GBN协议中，**对n号帧的确认采用累积确认的方式，标明接收方已经收到n号帧和它之前的全部帧。**
- **超时事件**：协议的名字为后退N帧/回退N帧，来源于出现丢失和时延过长帧时发送方的行为。就像在停等协议中一样，定时器将再次用于恢复数据帧或确认帧的丢失。**如果出现超时，发送方重传所有己发送但未被确认的帧。**

**（3）GBN接收方**

- **收到一个帧**：如果正确收到n号帧，并且按序，那么接收方为n帧发送一一个ACK， 并将该帧中的数据部分交付给上层。
- **其余情况**：其余情况都丢弃帧，并为最近按序接收的帧重新发送ACK。接收方无需缓存任何失序帧，只需要维护一个信息: expectedseqnum ( 下一个按序接收的帧序号)。

**（4）窗口长度限制**

​	若采用n个比特对帧编号，那么发送窗口的尺寸WT应满足: 
$$
1≤ Wτ≤2^n-1
$$
​	因为发送窗口尺寸过大，就会使得接收方无法区别新帧和旧帧。

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.3.4.png)

### 2.3.3 选择重传协议（SR）

**（1）SR的滑动窗口**

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.3.5.png)

**（2）SR发送方的三个响应**

- **上层的调用**：从上层收到数据后，SR发送方检查下一个可用于该帧的序号，如果序号位于发送窗口内，则发送数据帧;否则就像GBN一样，要么将数据缓存，要么返回给上层之后再传输。
- **收到了一个ACK**：如果收到ACK，加入该帧序号在窗口内，则SR发送方将那个被确认的帧标记为已接收。如果该帧序号是窗口的下界(最左边第一个窗口对应的序号)，则窗口向前移动到具有最小序号的未确认帧处。如果窗口移动了并且有序号在窗口内的未发送帧，则发送这些帧。
- **超时事件**：每个帧都有自己的定时器，一个超时事件发生后只重传一个帧。

**（3）SR接收方**

- **接收窗口内的帧**：（来者不拒）SR接收方将确认一个正确接收的帧而不管其是否按序。失序的帧将被缓存，并返回给发送方一个该帧的确认帧[ 收谁确认谁]，直到所有帧(即序号更小的帧)皆被收到为止，这时才可以将一批帧按序交付给上层，然后向前移动滑动
- **其他情况**：如果收到了窗口序号外(小于窗口下界)的帧，就返回一个ACK。其他情况，就忽略该帧。

**（4）窗口长度限制**

​	若采用n个比特对帧编号，那么发送窗口的尺寸WT和接收窗口的尺寸WR应满足: 
$$
WT=WR<=2^n/2
$$
​	因为发送窗口尺寸过大，就会使得接收方无法区别新帧和旧帧。

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.3.6.png)



# 3、介质访问控制

介质访问控制的内容就是，采取一定的措施，使得两对节点之间的通信不会发生互相干扰的情况。

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.4.1.png)

## 3.1 信道划分介质访问控制（MAC）

#### 3.1.1 频分多路复用（FDM）

​	用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。**频分复用的所有用户在同样的时间占用不同的带宽(频率带宽)资源。**

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.4.2.png)

#### 3.1.2 时分多路复用（TDM）

**（1）时分多路复用**

​	将时间划分为一段段等长的时分复用帧(TDM帧)。每一个时分复用的用户在每一个TDM帧中占用固定序号的时隙，所有用户轮流占用信道。

<img src="G:\个人数据\笔记\NoteBook\计算机网络\img\3.4.3.png" style="zoom:67%;" />

**（2）统计时分复用**

​	每一个STDM帧中的时隙数小于连接在集中器上的用户数。各用户有了数据就随时发往集中器的输入缓存，然后集中器按顺序依次扫描输入缓存，把缓存中的输入数据放入STDM帧中，一个STDM帧满了就发出。STDM帧不是固定分配时隙，而是按需动态分配时隙。

#### 3.1.3 波分多路复用（WDM）

​	波分多路复用就是光的频分多路复用，在一根光纤中传输多种不同波长(频率)的光信号，由于波长(频率)不同，所以各路光信号互不干扰，最后再用波长分解复用器将各路波长分解出来。

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.4.4.png)

#### 3.1.4 码分多路复用（CDM）【重点】

​	**码分多址(CDMA)是码分复用的一种方式。**1个比特分为多个码片/芯片(chip) ，每一个站点被指定一个唯一的m位的芯片序列，发送1时站点发送芯片序列，发送0时发送芯片序列反码(通常把0写成-1)。

- 如何不打架:多个站点同时发送数据的时候，要求**各个站点芯片序列相互正交**。
- 如何合并:各路数据在信道中被线性相加
- 如何分离:**合并的数据和源站规格化内积**。

**例题：**

<img src="G:\个人数据\笔记\NoteBook\计算机网络\img\3.4.5.png" alt=" " style="zoom:67%;" />



**解析：**
$$
A：(-1,+1,-1,+1,+1,+1,-1,-1)·(-1,+1,-3,+1,-1,-3,+1,+1)\\=(1+1+3+1-1-3-1-1)/8\\=0
$$

$$
B：(-1,-1,+1,-1,+1,+1,+1,-1)·(-1,+1,-3,+1,-1,-3,+1,+1)\\=(1-1-3-1-1-3+1-1)/8\\=-1
$$

$$
C：(-1,-1,-1,+1,+1,-1,+1,+1)·(-1,+1,-3,+1,-1,-3,+1,+1)\\=(1-1+3+1-1+3+1+1)/8\\=1
$$

$$
D：(-1,+1,-1,-1,-1,-1,+1,-1)·(-1,+1,-3,+1,-1,-3,+1,+1)\\=(1+1+3-1+1+3+1-1)/8\\=1
$$

​	结果为：1代表发送了数据“1”，0代表没有发送数据，-1代表发送数据“0”

## 3.2 随机访问介质访问

### 3.2.1 ALOHA协议

- 纯ALOHA协议:不监听信道，不按时间槽发送，随机重发。
- 时隙ALOHA协议:把时间分成若干个相同的时间片，所有用户在时间片开始时刻同步接入网络信道，若发生冲突，则必须等到下一个时间片开始时刻再发送。

### 3.2.2 CSMA协议

CS:载波侦听/监听，每-一个站在发送数据之前要检测一下 总线上是否有其他计算机在发送数据。

MA:多点接入，表示许多计算机以多点接入的方式连接在一根总线上。

协议思想:发送帧之前，**监听信道**。

监听结果：信道空闲、信道忙

根据结果有三种协议策略：1-坚持CSMA 、非坚持CSMA、p-坚持CSMA

|          | 1-坚持CSMA   | 非坚持CSMA                     | p-坚持CSMA                                   |
| -------- | ------------ | ------------------------------ | -------------------------------------------- |
| 信道空闲 | 马上发       | 马上发                         | p概览马上发送，1-p概率等到下个时间间隙再发送 |
| 信道忙   | 继续坚持监听 | 放弃监听，等一个随机事件再监听 | 继续监听                                     |



### 3.2.3 CSMA/CD协议

- CS:载波侦听/监听，每一个站在发送数据之前以及发送数据时都要检测一下总线上是否有其他计算机在发送数据。
- MA: 多点接入，表示许多计算机以多点接入的方式连接在一根总线上。
- CD:碰撞检测(冲突检测)，“ 边发送边监听”，适配器边发送数据边检测信道上信号电压的变化情况，以便判断自己在发送数据时其他站是否也在发送数据。

双方能检测到发生碰撞的时间范围，设单程端到端传播时延为T，则时间范围为
$$
(0,2T)
$$
确定碰撞后的重传时机：**截断二进制制数规避算法**

1. 确定基本退避(推迟)时间为争用期2T。

2. 定义参数k，它等于重传次数，但k不超过10，即k=min[重传次数， 10]。 当重传次数不超过10时，k等于重传次数;当重传次数大于10时，k就不再增大而一直等于10。

3. 从离散的整数集合[0, 1,....., 2^k-1]中随机取出一个数r，重传所需要退避的时间就是**r倍的基本退避时间**，即2rT。

4. 当重传达16次仍不能成功时，说明网络太拥挤，认为此帧永远无法正确发出，抛弃此帧并向高层报告出错。

   **最小帧长**

$$
帧长>=2*总线传播时延*数据传输速率
$$



### 3.2.4 CSMA/CA协议

**（1）特点**：预约信道、ACK帧、RTS/CTS帧

**（2）原理**

1. 发送数据前，先检测信道是否空闲。
2. 空闲则发出RTS (request to send)，RTS包括发射端的地址、接收端的地址、下 一份数据将持续发送的时间等信息;信道忙则等待。
3. 接收端收到RTS后，将响应CTS (clear to send)。
4. 发送端收到CTS后，开始发送数据帧(同时预约信道:发送方告知其他站点自己要传多久数据)。
5. 接收端收到数据帧后，将用CRC来检验数据是否正确，正确则响应ACK帧。
6. 发送方收到ACK就可以进行下一个数据帧的发送，若没有则一直重传至规定重发次数为止(采用二进制指数退避算法来确定随机的推迟时间)。

**（3）与CSMA/CD协议的不同**

- 传输介质不同
- 载波检测方式不同
- CSMA/CD检测冲突，CSMA/CA避免冲突

## 3.3 轮询访问介质访问控制

（1）轮询协议：主结点轮流“邀请”从属结点发送数据

（2）**令牌传递协议**

​	令牌:一个特殊格式的MAC控制帧，不含任何信息。控制信道的使用，确保同一时刻只有一个结点独占信道。

​	每个结点都可以在一定的时间内(令牌持有时间)获得发送数据的权利，并不是无限制地持有令牌。

<img src="G:\个人数据\笔记\NoteBook\计算机网络\img\3.5.1.png" alt=" " style="zoom:67%;" />

## 3.4 各种协议的适用

| 协议                            | 特点                                                 | 网络负载重时           | 网络负载轻时                               |
| ------------------------------- | ---------------------------------------------------- | ---------------------- | ------------------------------------------ |
| 信道划分介质访问控制（MAC）协议 | 基于多路复用技术划分资源。                           | 共享信道效率高，且公平 | 共享信道效率低                             |
| 随机访问MAC协议                 | 用户根据意愿随机发送信息，发送信息时可独占信道带宽。 | 产生冲突开销           | 共享信道效率高，单个结点可利用信道全部带宽 |
| 轮询协议                        | 既要不产生冲突，又要发送时占全部带宽。               |                        |                                            |



# 4、局域网

## 4.1 局域网概述

​	（1）局域网(Local Area Network) :简称LAN, 是指在某一区域内由多台计算机互联成的计算机组，使用广播信道。

​	（2）决定**局域网的主要要素**为:

- 网络拓扑：星型拓扑、环形拓扑、总线型拓扑、树型拓扑
- 传输介质
  - 有线局域网：双绞线、同轴电缆、光纤
  - 无线局域网：电磁波
- 介质访问控制方法：CSMA/CD、令牌总线、令牌环

​	（3）局域网**特点**

- 覆盖的地理范围较小，只在一个相对独立的局部范围内联，如一座或集中的建筑群内。
- 使用专门铺设的传输介质(双绞线、同轴电缆)进行联网，数据传输速率高(10Mb/s ~ 10Gb/s)。
- 通信延迟时间短，误码率低，可靠性较高。
- 各站为平等关系，共享传输信道。
- 多采用分布式控制和广播式通信，能进行广播和组播。

（4）**局域网的分类**：以太网、令牌环网、FDDI网、ATM网、无线局域网

（5）**MAC子层和LLC子层**

​	IEEE 802标准所描述的局域网参考模型只对应OSI参考模型的数据链路层与物理层，它将数据链路层划分为逻辑链路层LLC子层和介质访问控制MAC子层。

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.6.1.png)

​	**LLC子层**负责识别网络层协议，然后对它们进行封装。LLC报头告诉数据链路层一旦帧被接收到时，应当对数据包做何处理。为网络层提供服务:无确认无连接、面向连接、带确认无连接、高速传送。

​	**MAC子层**的主要功能包括数据帧的封装/卸装，帧的寻址和识别，帧的接收与发送，链路的管理，帧的差错控制等。MAC子层的存在屏蔽了不同物理链路种类的差异性。

## 4.2 以太网（Ethernet）

**（1）概述**

​	以太网(Ethernet)指的是由Xerox公司创建并由Xerox、Intel 和DEC公司联合开发的基带总线局域网规范，是当今现有局域网采用的最通用的通信协议标准。以太网络使用**CSMA/CD**(载波监听多路访问及冲突检测)技术。

**（2）无连接、不可靠服务**

​	**以太网只实现无差错接收，不实现可靠传输。**

​	无连接:发送方和接收方之间无“握手过程”。

​	不可靠:不对发送方的数据帧编号，接收方不向发送方进行确认，差错帧直接丢弃，差错纠正由高层负责。

**（3）10BASE-T以太网**

​	10BASE-T是传送基带信号的双绞线以太网，T表示采用双绞线，现10BASE-T 采用的是无屏蔽双绞线(UTP)，传输速率是10Mb/s。

​	物理上采用星型拓扑，逻辑上总线型，每段双绞线最长为100m。

​	采用曼彻斯特编码。

​	采用CSMA/CD介质访问控制。

**（4）适配器(网卡)与MAC地址**

​	计算机与外界有局域网的连接是通过通信适配器的。

​	适配器上装有处理器和存储器(包括RAM和ROM)

​	ROM上有计算机硬件地址:MAC地址。

​	在局域网中，硬件地址又称为物理地址，或MAC地址。[ 实际上是标识符]

​	**MAC地址**:每个适配器有一个全球唯一的48位二进制地址，前24位代表厂家(由IEEE规定)，后24位厂家自己指定。常用6个十六进制数表示，如02-60-8c-e4-b1-21 。

**（5）MAC帧格式**

​	最常用的MAC帧是以太网V2的格式

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.6.2.png)

**（6）高速以太网**：速率>=100Mb/s的以太网称为高速以太网

## 4.3 无线局域网

- 有固定基础设施无线局域网
- 无固定基础设施无线局域网的自组织网络

**802.11的MAC帧头格式**

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.6.3.png)



# 5、广域网

​	广域网(WAN，Wide Area Network)，通常跨接很大的物理范围，所覆盖的范围从几十公里到几千公里，它能连接多个城市或国家，或横跨几个洲并能提供远距离通信，形成国际性的远程网络。

​	广域网的通信子网主要使用分组交换技术。广域网的通信子网可以利用公用分组交换网、卫星通信网和无线分组交换网，它将分布在不同地区的局域网或计算机系统互连起来，达到资源共享的目的。如因特网(Internet )是世界范围内最大的广域网。

## 5.1 PPP协议

**（1）PPP协议的组成**

- 一个将IP数据报封装到串行链路( 同步串行/异步串行)的方法。
- 链路控制协议LCP：建立并维护数据链路连接。
- 网络控制协议NCP：PPP可 支持多种网络层协议，每个不同的网络层协议都要一个相应的NCP来配置，为网络层协议建立和配置逻辑连接。

**（2）PPP协议状态图**

<img src="G:\个人数据\笔记\NoteBook\计算机网络\img\3.7.1.png" alt=" " style="zoom:67%;" />

**（3）PPP协议的帧格式**

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.7.2.png)

## 5.2 HDLC协议

​	高级数据链路控制(High-Level Data Link Control或简称HDLC)，是一个在同步网上传输数据、面向比特的数据链路层协议，它是由国际标准化组织(ISO)根据IBM公司的SDLC(SynchronousData Link Control)协议扩展开发而成的.数据报文可透明传输，用于实现透明传输的“0比特插入法”易于硬件实现。

​	采用全双工通信。

​	所有帧采用CRC检验，对信息帧进行顺序编号，可防止漏收或重份，传输可靠性高。

**（1）HDLC的站**

- 主站：主要功能是发送命令(包括数据信息)帧、接收响应帧，并负责对整个链路的控制系统的初启、流程的控制、差错检测或恢复等。
- 从站：主要功能是接收由主站发来的命令帧，向主站发送响应帧，并且配合主站参与差错恢复等链路控制。
- 复合站：主要功能是既能发送，又能接收命令帧和响应帧，并且负责整个链路的控制。

（2）三种数据操作方式：正常响应方式、异步平衡方式、异步响应方式

**（3）HDLC的帧格式**

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.7.3.png)

**（4）HDLC的帧类型（控制C的值）**

- 信息帧(I) ：第1位为0，用来传输数据信息，或使用捎带技术对数据进行确认
- 监督帧(S) ：10, 用于流量控制和差错控制，执行对信息帧的确认、请求重发和请求暂停发送等功能
- 无编号帧(U)： 11，用于提供对链路的建立、拆除等多种控制功能

## 5.3 PPP协议与HDLC协议的异同

**（1）相同点**

- 只支持全双工链路
- 都可以实现透明传输
- 都可以实现差错检测，但不纠正差错

**（2）不同点**

| PPP协议  | 面向字节 | 2B协议字段 | 无序号和确认机制 | 不可靠 |
| -------- | -------- | ---------- | ---------------- | ------ |
| HDLC协议 | 面向比特 | 没有       | 有编号和确认机制 | 可靠   |



# 6、链路层设备

- 物理层扩展以太网：光纤、主干集线器
- 链路层扩展以太网：网桥、交换机

## 6.1 网桥

​	网桥根据MAC帧的目的地址对帧进行转发和过滤。当网桥收到一个帧时，并不向所有接口转发此帧，而是先检查此帧的目的MAC地址，然后再确定将该帧转发到哪一个接口， 或者是把它丢弃( 即过滤)。

​	优点：

- 过滤通信量，增大吞吐量。

- 扩大了物理范围。

- 提高了可靠性

- 可互连不同物理层、不同MAC子层和不同速率的以太网。 

​    分类：

- 透明网桥：“ 透明”指以太网上的站点并不知道所发送的帧将经过哪几个网桥，是一种即插即用设备。（通过自学习算法工作）
- 源路由网桥：在发送帧时，把详细的最佳路由信息(路由最少/时间最短)放在帧的首部中。、源站以广播方式向欲通信的目的站发送一个发现帧。

## 6.2 交换机

​	交换方式

- 直通式交换机：查完目的地址(6B)就立刻转发。延迟小，可靠性低，无法支持具有不同速率的端口的交换。
- 存储转发式交换机：将帧放入高速缓存，并检查否正确，正确则转发，错误则丢弃。

## 6.3 冲突域和广播域

- 冲突域：在同一个冲突域中的每一个节点都能收到所有被发送的帧。简单的说就是同一时间内只能有一台设备发送信息的范围。
- 广播域：网络中能接收任一设备发出的广播帧的所有设备的集合。简单的说如果站点发出一个广播信号，所有能接收收到这个信号的设备范围称为-一个广播域。

|                              | 能够隔离冲突域 | 能够隔离广播域 |
| ---------------------------- | -------------- | -------------- |
| 物理层设备（中继器、集线器） | X              | X              |
| 链路层设备（网桥、交换机）   | √              | X              |
| 网络层设备（路由器）         | √              | √              |

![](G:\个人数据\笔记\NoteBook\计算机网络\img\3.png)